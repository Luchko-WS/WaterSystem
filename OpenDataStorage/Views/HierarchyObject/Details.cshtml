@{
    ViewBag.Title = Lexicon.Object;
}

<div class="page-with-extra-navbar">
    <div ng-controller="HierarchyObjectCtrl as vm">
        <h2 ng-bind="vm.obj.name"></h2>
        <async-page-with-loader is-loaded="vm.objLoaded">
            <div class="row">
                <label class="control-label col-md-2">@Lexicon.Name</label>
                <div class="col-md-10">
                    <span ng-bind="vm.obj.name"></span>
                </div>
            </div>
            <div class="row" ng-if="vm.obj.description">
                <label class="control-label col-md-2">@Lexicon.Description</label>
                <div class="col-md-10">
                    <span ng-bind="vm.obj.description"></span>
                </div>
            </div>
            <div class="row" ng-if="vm.obj.objectType">
                <label class="control-label col-md-2">@Lexicon.ObjectType</label>
                <div class="col-md-10">
                    <span ng-bind="vm.obj.objectType.name"></span>
                </div>
            </div>
            <div class="row">
                <label class="control-label col-md-2">@Lexicon.Owner</label>
                <div class="col-md-10">
                    <span ng-bind="vm.obj.ownerId"></span>
                </div>
            </div>

            @if (Request.IsAuthenticated)
            {
                <button class="btn btn-primary" ng-click="vm.edit()">@Lexicon.Edit</button>
                <button class="btn btn-danger" ng-click="vm.remove()">@Lexicon.Remove</button>
            }
        </async-page-with-loader>

        <div ng-controller="ObjectDataCtrl as dataCtrl">
            <async-page-with-loader is-loaded="dataCtrl.loaded">
                <div class="row">
                    <table-view ng-model="dataCtrl.data"
                                @*filter-callback="0"*@
                                edit-callback="dataCtrl.edit"
                                remove-callback="dataCtrl.remove"
                                create-callback="dataCtrl.create"
                                enable-editing="dataCtrl.enableEditing" />
                </div>
            </async-page-with-loader>
        </div>
    </div>
</div>

@section Scripts{
    <script>
        window.app.constant('common', {
            id: '@ViewBag.Id'
        });
    </script>
}